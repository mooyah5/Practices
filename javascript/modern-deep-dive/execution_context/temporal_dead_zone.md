# TDZ

호이스팅 개념이 있으면 이해하기 좋음

JS에서 변수 선언 시 var을 사용하면, 호이스팅이 된다.

흔히 호이스팅 방지를 위해 사용되는 let, const 키워드 또한, 호이스팅이 된다.

## Temporal Dead Zone

`일시적 사각 지대`
스코프의 시작점부터 초기화 시작점까지의 구간

### 변수 선언 3단계

변수는 선언, 초기화, 할당 3단계에 걸쳐 생성된다.

- 선언 단계 (Declaration phase)
  변수를 실행컨텍스트의 변수객체에 등록하는 단계
  이 변수 객체는 스코프가 참조하는 대상이 된다.
- 초기화 단계 (Initialization phase)
  실행 컨텍스트에 존재하는 변수 객체에 선언 단계의 변수를 위한 메모리를 만드는 단계
  이 단계에서 할당된 메모리에는 undefinde로 초기화 된다.
- 할당 단계 (Assignment phase)
  사용자가 undefined로 초기화된 메모리의 다른 값을 할당하는 단계

var, let, const는 위 3단계의 순서에 차이가 있는 것이다.

각 단계의 라이프사이클

- var

  - 변수 선언 전 선언, 초기화 단계 동시진행
  - 그래서 JS는 실행컨텍스트 변수 객체의 변수를 등록하고 메모리를 undefined로 만든다.
  - 따라서, 변수 선언 전에는 호출해도 undefined로 호출되는 호이스팅이 발생함

- let
  - var과 다르게, 선언, 초기화 단계가 분리되어 진행된다.
  - 따라서 실행컨텍스트에 변수를 등록했으나, 메모리할당이 되지 않아, 접근할 수 없어 참조에러가 발생하는 것이고, 이를 보로 우리가 호이스팅 되지 않는다고 오해하는 것

## 다시 TMZ란?

스코프 시작 지점부터 초기화 시작지점까지의 구간

즉, let도 선언 전, 실행컨텍스트 변수 객체에 등록돼 호이스팅되지만
이 TMZ 구간에 의해 메모리 할당이 되지 않아 참조에러가 발생하는 것이다.

- 참고로 function키워드 함수는 변수선언 3단계를 동시진행해벌임

---

### 출처

https://noogoonaa.tistory.com/78
